<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      >
<head>
	<meta charset="ISO-8859-1">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<link href="/css/index.css" rel="stylesheet"/>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
	<title>Memorize - Learn Words!</title>
	
	
	
</head>

<body>
<header id="header" class="alt" th:include="naglowek_dyktando.html :: naglowek"></header>
<div class="container">
	<div>
		<a th:href="@{'/prezentacja/przerwij'}" class="btn btn-dark">Przerwij</a>
	</div>
	<a>Poprawne: </a><a th:text="${nauczone}"></a>/
	<a th:text="${count}"></a>
	<hr/>
</div>

<div class="container" style="text-align: center">
<a class="btn" id="play-button" style="display: inline-block;font-size:8vw;" onclick="playSound()">&rtrif;</a>
		<audio id = "play" autoplay>
  			<source th:src="${sl.dzwiek}" type="audio/mpeg">
 		</audio>
 		<h3>Wpisz usłyszane słowo:</h3>
 		<input id="odpowiedz" name="odpowiedz"/><br><br>
 		<input type="hidden" id="tlum" th:value="${sl.tlumaczenie}"/>
 		<button id="sprawdz" type="button" class="btn btn-dark" onclick="showDiv()">Sprawdz</button>
</div>
<hr/>
<div  id="wrong"  class="container" style="display:none; text-align: center">
	<h3 style=";color:red;">Źle!</h3>
	<h5 style="display: inline-block;" th:text="${sl.tlumaczenie}"></h5>-<h6 style="display: inline-block;" th:text="${sl.slowo}"></h6>
</div>


<div  id="good"  class="container" style="display:none; text-align: center">
	<h3 style=";color:green;">Dobrze!</h3>
	<h5 style="display: inline-block;" th:text="${sl.tlumaczenie}"></h5>-<h6 style="display: inline-block;" th:text="${sl.slowo}"></h6>
</div>

<div id="tlumaczenie" class="container" style="display:none; text-align: center">
		<audio id = "play">
  			<source th:src="${sl.dzwiek}" type="audio/mpeg">
 		</audio>


	<div class="jumbotron bg-success text_white" style="text-align:center;">
		<p>
			"Adams broke his leg"
		</p>
	</div>
<div>
		<form method="post" th:action="@{/dyktando/nastepny}">
			<input id="answer" type="hidden" name="answer" th:value="0"/>
			<input id="nauczone" type="hidden" name="answer" th:value="${nauczone}+ 1"/>
			<input id="count" type="hidden" name="answer" th:value="${count}"/>
			<input id="id" type="hidden" name="id" th:value="${id}"/>
			<div id="dalejButton" style="display:none">
				<button id="dalej" type="submit" class="btn float-right btn-dark">Dalej</button>
			</div>
			<div id="koniecButton" style="display:none">
				<button id="koniec"  type="button" class="btn float-right btn-success" data-toggle="modal" data-target="#etapyModal">Koniec</button>
			</div>
			
			<div class="modal fade" id="etapyModal" tabindex="-1" role="dialog" aria-labelledby="etapyModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header bg-success">
							<h5 class="modal-title text-white" id="etapyModalLabel">Nauka słówek:</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p class="font-weight-bold" style="text-align:left;">&#10003;1. Prezentacja</p>
							<p class="font-weight-bold" style="text-align:left;">&#10003;2. Wybierz tłumaczenie angielskie</p>
							<p class="font-weight-bold" style="text-align:left;">&#10003;3. Wybierz tłumaczenie polskie</p>
							<p class="font-weight-bold" style="text-align:left;">&#10003;4. Rozpoznawanie ze słuchu</p>
							<p class="font-weight-bold" style="text-align:left;">&#10003;5. Dyktando</p>
							<p class="text-secondary" style="text-align:left;">&emsp;6. Wpisz tłumaczenie</p>
						</div>
						<div class="modal-footer">
							<button type="submit" class="btn btn-dark" th:formaction="@{'/prezentacja/przerwij'}">Przerwij</button>
							<button type="submit" class="btn btn-success"  th:formaction="@{/dyktando/koniec}">Następny etap</button>
						</div>
					</div>
				</div>
			</div>
		
		</form>
	</div>
</div>
<footer id="footer" class="footer" th:include="stopka.html :: stopka"></footer> 

<script>
function showDiv() {
	var x=document.getElementById('odpowiedz').value.toLowerCase();
	console.log(x);
	var y=document.getElementById('tlum').value.toLowerCase();
	console.log(y);
   if(document.getElementById('odpowiedz').value.toLowerCase() == document.getElementById('tlum').value.toLowerCase()){
	   console.log(y);
	   if(document.getElementById('nauczone').value != document.getElementById('count').value){
	   		document.getElementById('dalejButton').style.display = "block";
	   }else{
		   document.getElementById('koniecButton').style.display = "block";
	   }
	   document.getElementById('tlumaczenie').style.display = "block";
	   document.getElementById('good').style.display= "block";
	   document.getElementById('answer').value = '1';
	   document.getElementById('odpowiedz').disabled =true;
	   document.getElementById('sprawdz').onclick =false;
   }else{
	   document.getElementById('dalejButton').style.display = "block";
	   document.getElementById('tlumaczenie').style.display = "block";
	   document.getElementById('wrong').style.display= "block";
	   document.getElementById('answer').value = '0';
	   document.getElementById('odpowiedz').disabled =true;
	   document.getElementById('sprawdz').onclick =false;
   };
   
}
function playSound(){
	document.getElementById('play').play();
}
</script>


</body>
</html>